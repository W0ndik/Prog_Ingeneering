Лабораторная работа №2

Учебная дисциплина: Программная инженерияПреподаватель: Дзюба Д.В.

Выполнил:студент гр. М80-109СВ-24 Дрёмов Александр

Задание

Разработать два HTTP REST API сервиса для системы, спроектированной в первом задании (социальная сеть):

Реализовать как минимум два сервиса:

user-service — управление пользователями (регистрация, вход, JWT-аутентификация)

wall-service — работа со "стеной" пользователя (добавление и чтение постов)

Поддержка JWT-аутентификации (Bearer)

Отдельный endpoint для получения токена по логину и паролю

Реализация минимум методов GET и POST

Хранение данных в памяти (без базы данных)

Наличие мастер-пользователя: admin / secret

Генерация OpenAPI-спецификаций в формате JSON и сохранение в директорию api_specs

Актуализация архитектурной модели в Structurizr DSL

Запуск всех сервисов через docker-compose up

Реализованные сервисы

Проект состоит из двух сервисов, написанных на FastAPI:

user-service

Регистрация и аутентификация пользователей

Получение JWT токена по логину/паролю (OAuth2PasswordRequestForm)

Защищённый endpoint /me

Хеширование паролей через passlib

wall-service

Добавление записей на стену /post

Загрузка всех записей /wall

Верификация токена через JWT (полученного от user-service)

JWT-аутентификация

Генерация токена: POST /token

Передача токена: Authorization: Bearer <token>

Декодирование и валидация токена на стороне wall-service

Docker / Docker Compose

Каждый сервис содержит свой Dockerfile

Все сервисы запускаются одной командой:

docker-compose up --build

Для генерации OpenAPI схем:

docker compose run user_service python openapi.py
docker compose run wall_service python openapi.py

OpenAPI спецификации

Сгенерированы автоматически с помощью FastAPI

Сохраняются в директории api_specs:

user_service.openapi.json

wall_service.openapi.json
